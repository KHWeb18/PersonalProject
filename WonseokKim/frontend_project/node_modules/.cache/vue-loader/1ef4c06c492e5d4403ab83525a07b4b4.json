{"remainingRequest":"/Users/wonseokkim/java_work/LectureContents/javascript/WonseokKim/proj_frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wonseokkim/java_work/LectureContents/javascript/WonseokKim/proj_frontend/src/views/SessionLoginPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wonseokkim/java_work/LectureContents/javascript/WonseokKim/proj_frontend/src/views/SessionLoginPage.vue","mtime":1631635705728},{"path":"/Users/wonseokkim/java_work/LectureContents/javascript/WonseokKim/proj_frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wonseokkim/java_work/LectureContents/javascript/WonseokKim/proj_frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wonseokkim/java_work/LectureContents/javascript/WonseokKim/proj_frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wonseokkim/java_work/LectureContents/javascript/WonseokKim/proj_frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgU2Vzc2lvbkxvZ2luRm9ybSBmcm9tICdAL2NvbXBvbmVudHMvc2Vzc2lvbi9TZXNzaW9uTG9naW5Gb3JtLnZ1ZScKaW1wb3J0IHsgbWFwU3RhdGUsIG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JwppbXBvcnQgVnVlIGZyb20gJ3Z1ZScKaW1wb3J0IGNvb2tpZXMgZnJvbSAndnVlLWNvb2tpZXMnCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKClZ1ZS51c2UoY29va2llcykKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ1Nlc3Npb25Mb2dpblBhZ2UnLAogICAgY29tcG9uZW50czogewogICAgICAgIFNlc3Npb25Mb2dpbkZvcm0KICAgIH0sCiAgICBkYXRhICgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpc0xvZ2luOiBmYWxzZSwKICAgICAgICB9CiAgICB9LAogICAgbW91bnRlZCAoKSB7CiAgICAgICAgLy8gdGhpcy5mZXRjaFNlc3Npb24oKQogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnNlc3Npb24gPSB0aGlzLiRjb29raWVzLmdldCgidXNlciIpCiAgICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLnNlc3Npb24gIT0gbnVsbCkgewogICAgICAgICAgICB0aGlzLmlzTG9naW4gPSB0cnVlCiAgICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgLi4ubWFwU3RhdGUoWydzZXNzaW9uJ10pCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIC4uLm1hcEFjdGlvbnMoWydmZXRjaFNlc3Npb24nXSksCiAgICAgICAgb25TdWJtaXQgKHBheWxvYWQpIHsKICAgICAgICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLnNlc3Npb24gPT0gbnVsbCkgewogICAgICAgICAgICAgICAgY29uc3QgeyB1c2VySWQsIHBhc3N3b3JkQ2hlY2sgfSA9IHBheWxvYWQKICAgICAgICAgICAgICAgIGF4aW9zLnBvc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6ODg4OC9qcGFzZXNzaW9uL3NpZ24taW4nLCB7IHVzZXJJZCwgcGFzc3dvcmRDaGVjayB9KQogICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmhhc2hjb2RlICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgn66Gc6re47J24IOyEseqztSEgLSAnICsgcmVzLmRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0xvZ2luID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnNlc3Npb24gPSByZXMuZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGNvb2tpZXMuc2V0KCJ1c2VyIiwgcmVzLmRhdGEsICcxaCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfroZzqt7jsnbgg7Iuk7YyoISAtICcgKyByZXMuZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzTG9naW4gPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ0hvbWUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9wYXJhbXM6IHsgYm9hcmRObzogcmVzLmRhdGEuYm9hcmROby50b1N0cmluZygpIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChyZXMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQocmVzLnJlc3BvbnNlLmRhdGEubWVzc2FnZSkKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCfsnbTrr7gg66Gc6re47J24IOuQmOyWtCDsnojsirXri4jri6QgLSDqs4TsoJU6ICcgKyB0aGlzLiRzdG9yZS5zdGF0ZS5zZXNzaW9uLmVtYWlsKQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBzaG93U2Vzc2lvbiAoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmlzTG9naW4gPT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgYXhpb3MucG9zdCgnaHR0cDovL2xvY2FsaG9zdDo4ODg4L2pwYXNlc3Npb24vbmVlZFNlc3Npb24nKQogICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhID09IHRydWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgn7IS47IWYIOygleuztCDsnKDsp4AhIC0gJyArIHJlcy5kYXRhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgn7IS47IWYIOygleuztCDsnKDsp4Ag7JWI65CY64qUIOykkSEgLSAnICsgcmVzLmRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdCb2FyZFJlYWRQYWdlJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHsgYm9hcmRObzogcmVzLmRhdGEuYm9hcmROby50b1N0cmluZygpIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2gocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KHJlcy5yZXNwb25zZS5kYXRhLm1lc3NhZ2UpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBhbGVydCgn66i87KCAIOuhnOq3uOyduOu2gO2EsCDtlZjshLjsmpQhJykKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgcmVtb3ZlU2Vzc2lvbiAoKSB7CiAgICAgICAgICAgIGF4aW9zLnBvc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6Nzc3Ny9qcGFtZW1iZXIvcmVtb3ZlU2Vzc2lvbicpCiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0xvZ2luID0gcmVzLmRhdGEKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgbG9nb3V0ICgpIHsKICAgICAgICAgICAgdGhpcy4kY29va2llcy5yZW1vdmUoInVzZXIiKQogICAgICAgICAgICB0aGlzLmlzTG9naW4gPSBmYWxzZQogICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5zZXNzaW9uID0gbnVsbAogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["SessionLoginPage.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SessionLoginPage.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div>\n        <session-login-form @submit=\"onSubmit\"/>\n    </div>\n</template>\n\n<script>\n\nimport SessionLoginForm from '@/components/session/SessionLoginForm.vue'\nimport { mapState, mapActions } from 'vuex'\nimport Vue from 'vue'\nimport cookies from 'vue-cookies'\nimport axios from 'axios'\n\nVue.use(cookies)\nexport default {\n    name: 'SessionLoginPage',\n    components: {\n        SessionLoginForm\n    },\n    data () {\n        return {\n            isLogin: false,\n        }\n    },\n    mounted () {\n        // this.fetchSession()\n        this.$store.state.session = this.$cookies.get(\"user\")\n        if (this.$store.state.session != null) {\n            this.isLogin = true\n        }\n    },\n    computed: {\n        ...mapState(['session'])\n    },\n    methods: {\n        ...mapActions(['fetchSession']),\n        onSubmit (payload) {\n            if (this.$store.state.session == null) {\n                const { userId, passwordCheck } = payload\n                axios.post('http://localhost:8888/jpasession/sign-in', { userId, passwordCheck })\n                        .then(res => {\n                            if (res.data.hashcode != null) {\n                                alert('로그인 성공! - ' + res.data)\n                                this.isLogin = true\n                                this.$store.state.session = res.data\n                                this.$cookies.set(\"user\", res.data, '1h')\n                            } else {\n                                alert('로그인 실패! - ' + res.data)\n                                this.isLogin = false\n                            }\n                            this.$router.push({\n                            name: 'Home',\n                            //params: { boardNo: res.data.boardNo.toString() }\n                            })\n                        })\n                        .catch(res => {\n                            alert(res.response.data.message)\n                        })\n            } else {\n                alert('이미 로그인 되어 있습니다 - 계정: ' + this.$store.state.session.email)\n            }\n        },\n        showSession () {\n            if (this.isLogin == true) {\n                axios.post('http://localhost:8888/jpasession/needSession')\n                        .then(res => {\n                            if (res.data == true) {\n                                alert('세션 정보 유지! - ' + res.data)\n                            } else {\n                                alert('세션 정보 유지 안되는 중! - ' + res.data)\n                            }\n                            /*\n                            this.$router.push({\n                                name: 'BoardReadPage',\n                                params: { boardNo: res.data.boardNo.toString() }\n                            })\n                            */\n                        })\n                        .catch(res => {\n                            alert(res.response.data.message)\n                        })\n            } else {\n                alert('먼저 로그인부터 하세요!')\n            }\n        },\n        removeSession () {\n            axios.post('http://localhost:7777/jpamember/removeSession')\n                    .then(res => {\n                        this.isLogin = res.data\n                    })\n        },\n        logout () {\n            this.$cookies.remove(\"user\")\n            this.isLogin = false\n            this.$store.state.session = null\n        }\n    }\n}\n</script>"]}]}